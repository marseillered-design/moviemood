const TMDB_API_KEY = '838a2b872b36560920c01b7b50b0bb9e';const TMDB_BASE_URL = 'https://api.themoviedb.org/3';const TMDB_IMAGE_BASE_URL = 'https://image.tmdb.org/t/p/w500';const params = new URLSearchParams(window.location.search);const movieId = params.get('id');const mediaType = params.get('type') || 'movie';async function loadMovie() {  if (!movieId) return;  const [details, credits, videos, providers] = await Promise.all([    fetch(`${TMDB_BASE_URL}/${mediaType}/${movieId}?api_key=${TMDB_API_KEY}`).then(r => r.json()),    fetch(`${TMDB_BASE_URL}/${mediaType}/${movieId}/credits?api_key=${TMDB_API_KEY}`).then(r => r.json()),    fetch(`${TMDB_BASE_URL}/${mediaType}/${movieId}/videos?api_key=${TMDB_API_KEY}`).then(r => r.json()),    fetch(`${TMDB_BASE_URL}/${mediaType}/${movieId}/watch/providers?api_key=${TMDB_API_KEY}`).then(r => r.json()),  ]);  // ???????? ????  const title = details.title || details.name;  const year = (details.release_date || details.first_air_date || '').slice(0, 4);  const runtime = details.runtime ? `${details.runtime} min` : '';  document.title = `${title} — MovieMood`;  document.getElementById('movieTitle').textContent = title;  document.getElementById('movieYear').textContent = year;  document.getElementById('movieRuntime').textContent = runtime;  document.getElementById('movieOverview').textContent = details.overview;  document.getElementById('movieGenres').textContent = details.genres?.map(g => g.name).join(', ');  document.getElementById('tmdbRating').textContent = details.vote_average?.toFixed(1);  if (details.poster_path) {    document.getElementById('moviePoster').src = `${TMDB_IMAGE_BASE_URL}${details.poster_path}`;  }  // IMDb  if (details.imdb_id) {    const imdbLink = document.getElementById('imdbLink');    imdbLink.href = `https://www.imdb.com/title/${details.imdb_id}`;    imdbLink.style.display = 'inline';  }  // ????????const director = credits.crew?.find(p => p.job === 'Director');if (director) {  const directorEl = document.getElementById('movieDirector');  directorEl.innerHTML = `    <span class="person-chip" onclick="window.open('person.html?id=${director.id}', '_blank')">      <img src="${director.profile_path ? 'https://image.tmdb.org/t/p/w185' + director.profile_path : 'https://via.placeholder.com/40x40?text=?'}" alt="${director.name}">      ${director.name}    </span>  `;}// ??????const castContainer = document.getElementById('movieCast');const castHTML = credits.cast?.slice(0, 6).map(a => `  <div class="actor-card" onclick="window.open('person.html?id=${a.id}', '_blank')">    <img src="${a.profile_path ? 'https://image.tmdb.org/t/p/w185' + a.profile_path : 'https://via.placeholder.com/80x120?text=?'}" alt="${a.name}">    <span>${a.name}</span>    <small>${a.character}</small>  </div>`).join('');castContainer.innerHTML = castHTML || '—';  // ??? ????????  const regionProviders = providers.results?.US;  if (regionProviders?.flatrate?.length) {    const list = regionProviders.flatrate.map(p => `      <img src="https://image.tmdb.org/t/p/w45${p.logo_path}" title="${p.provider_name}" alt="${p.provider_name}">    `).join('');    document.getElementById('watchProviders').innerHTML = `<h3>Where to watch:</h3><div class="providers-list">${list}</div>`;  }}loadMovie();